{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/clementbraun/nsi-next-app/Nsi-app/nsi-fox/app/api/search/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\nimport matter from 'gray-matter';\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url);\n  const query = searchParams.get('q')?.toLowerCase() || '';\n  \n  const contentDir = path.join(process.cwd(), 'content');\n  const results: any[] = [];\n\n  if (query.length < 2) return NextResponse.json([]);\n\n  // On parcourt les dossiers de niveaux (0, 1, 2...)\n  const levels = fs.readdirSync(contentDir);\n\n  levels.forEach((level) => {\n    const levelPath = path.join(contentDir, level);\n    if (fs.statSync(levelPath).isDirectory()) {\n      const files = fs.readdirSync(levelPath).filter(f => f.endsWith('.md'));\n\n      files.forEach((file) => {\n        const fileContent = fs.readFileSync(path.join(levelPath, file), 'utf8');\n        const { data } = matter(fileContent);\n        const title = data.title || file.replace('.md', '').replace(/[_-]/g, ' ');\n\n        // Si le titre ou le contenu correspond à la recherche\n        if (title.toLowerCase().includes(query)) {\n          results.push({\n            title,\n            level,\n            slug: file.replace('.md', ''),\n            category: level === '1' ? 'SNT' : level === '2' ? '1ère NSI' : level === '3' ? 'Terminale NSI' : `Niveau ${level}`\n          });\n        }\n      });\n    }\n  });\n\n  return NextResponse.json(results.slice(0, 8)); // On limite à 8 résultats\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC,MAAM,iBAAiB;IAEtD,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;IAC5C,MAAM,UAAiB,EAAE;IAEzB,IAAI,MAAM,MAAM,GAAG,GAAG,OAAO,gJAAY,CAAC,IAAI,CAAC,EAAE;IAEjD,mDAAmD;IACnD,MAAM,SAAS,wGAAE,CAAC,WAAW,CAAC;IAE9B,OAAO,OAAO,CAAC,CAAC;QACd,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,YAAY;QACxC,IAAI,wGAAE,CAAC,QAAQ,CAAC,WAAW,WAAW,IAAI;YACxC,MAAM,QAAQ,wGAAE,CAAC,WAAW,CAAC,WAAW,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC;YAE/D,MAAM,OAAO,CAAC,CAAC;gBACb,MAAM,cAAc,wGAAE,CAAC,YAAY,CAAC,4GAAI,CAAC,IAAI,CAAC,WAAW,OAAO;gBAChE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,oJAAM,EAAC;gBACxB,MAAM,QAAQ,KAAK,KAAK,IAAI,KAAK,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,SAAS;gBAErE,sDAAsD;gBACtD,IAAI,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ;oBACvC,QAAQ,IAAI,CAAC;wBACX;wBACA;wBACA,MAAM,KAAK,OAAO,CAAC,OAAO;wBAC1B,UAAU,UAAU,MAAM,QAAQ,UAAU,MAAM,aAAa,UAAU,MAAM,kBAAkB,CAAC,OAAO,EAAE,OAAO;oBACpH;gBACF;YACF;QACF;IACF;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,QAAQ,KAAK,CAAC,GAAG,KAAK,0BAA0B;AAC3E"}}]
}